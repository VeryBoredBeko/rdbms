# **Теоретический материал**

## 1. Транзакции: ACID-принципы

**Транзакция** — это единица работы с базой данных, которая выполняется полностью или не выполняется вовсе.
**ACID-принципы:**

* **Atomicity (Атомарность)** — транзакция выполняется полностью или откатывается при ошибке.
* **Consistency (Согласованность)** — база данных после транзакции остаётся в корректном состоянии.
* **Isolation (Изоляция)** — параллельные транзакции не мешают друг другу.
* **Durability (Долговечность)** — изменения сохраняются даже при сбое системы.

Пример: перевод денег между счетами: снятие с одного счёта и зачисление на другой выполняется как одна транзакция.

---

## 2. Блокировки и управление конкурентным доступом

**Проблема:** несколько пользователей одновременно читают или изменяют одни и те же данные.

**Решение:** блокировки и уровни изоляции:

* **Shared lock (разделяемая)** — другие транзакции могут читать, но не изменять данные.
* **Exclusive lock (исключительная)** — другие транзакции не могут читать или изменять данные.

**Уровни изоляции транзакций:**

1. Read Uncommitted — могут читаться незавершённые изменения (грязное чтение).
2. Read Committed — читаются только подтверждённые изменения.
3. Repeatable Read — повторное чтение даёт одинаковый результат в рамках транзакции.
4. Serializable — полная изоляция, транзакции выполняются как по очереди.

---

## 3. Управление пользователями и правами доступа

**Цель:** защитить данные и ограничить возможности пользователей.

* **Роли и привилегии:**

  * Администратор — полный доступ.
  * Пользователь — ограниченный доступ к своим данным.
  * Гость — только чтение.

* **Примеры прав:**

  * SELECT — чтение данных
  * INSERT — добавление данных
  * UPDATE — изменение данных
  * DELETE — удаление данных

* **Реализация:** через SQL команды `GRANT`, `REVOKE`, создание пользователей и ролей.

---

## 4. Мониторинг и оптимизация производительности

**Мониторинг:** отслеживание работы базы данных для выявления проблем.

* Метрики: нагрузка на CPU, количество соединений, время выполнения запросов.
* Инструменты: pgAdmin, EXPLAIN, system views (pg_stat_activity).

**Оптимизация:**

* Использование **индексов** для ускорения поиска.
* Разделение больших таблиц (**partitioning**).
* Оптимизация SQL-запросов, сокращение JOIN и подзапросов.
* Настройка **пула соединений** и кэширования.
